{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const fetchData = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '53385798-f9f5c437f9a7cc006b35ba392',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: '15',\n      },\n    });\n    return fetchData.data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn-load-more');\nlet lightbox;\n\nexport function createGallery(images) {\n  const li = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${image.largeImageURL}\"><img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n    /></a><div class=\"img-data\"><div><h5>Likes</h5><p>${image.likes}</p></div><div><h5>Views</h5><p>${image.views}</p></div><div><h5>Comments</h5><p>${image.comments}</p></div><div><h5>Downloads</h5><p>${image.downloads}</p></div></div></li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', li);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-item a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      animationSpeed: 300,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMore.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst loadMore = document.querySelector('.btn-load-more');\nlet page = 1;\nlet query = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  query = input.value.trim();\n  page = 1;\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Input field cannot be empty.',\n      position: 'topRight',\n      backgroundColor: '#FFA000',\n      messageColor: '#fff',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query);\n    if (data.hits.length === 0) {\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#fff',\n      });\n    }\n\n    createGallery(data.hits);\n\n    if (data.totalHits > 15) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMore.addEventListener('click', async () => {\n  hideLoadMoreButton();\n  showLoader();\n\n  page += 1;\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    const totalPages = Math.ceil(data.totalHits / 15);\n\n    createGallery(data.hits);\n\n    if (page < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      return iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["getImagesByQuery","query","page","axios","err","gallery","loader","loadMore","lightbox","createGallery","images","li","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","e","iziToast","data","error","totalPages"],"mappings":"+vBAEO,eAAeA,EAAiBC,EAAOC,EAAM,CAClD,GAAI,CAYF,OAXkB,MAAMC,EAAM,IAAI,2BAA4B,CAC5D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,IACX,CACP,CAAK,GACgB,IAClB,OAAQE,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CChBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,gBAAgB,EACxD,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAKD,EACR,IACCE,GACE,0DAA0DA,EAAM,aAAa;AAAA;AAAA,aAExEA,EAAM,YAAY;AAAA,qBACVA,EAAM,aAAa;AAAA,aAC3BA,EAAM,IAAI;AAAA,wDACiCA,EAAM,KAAK,mCAAmCA,EAAM,KAAK,sCAAsCA,EAAM,QAAQ,uCAAuCA,EAAM,SAAS,uBACtN,EACA,KAAK,EAAE,EACVP,EAAQ,mBAAmB,YAAaM,CAAE,EAErCH,EAQHA,EAAS,QAAO,EAPhBA,EAAW,IAAIK,EAAe,kBAAmB,CAC/C,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,GACtB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7BT,EAAQ,UAAY,EACtB,CAEO,SAASU,GAAa,CAC3BT,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASU,GAAa,CAC3BV,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASW,GAAqB,CACnCV,EAAS,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASW,GAAqB,CACnCX,EAAS,UAAU,IAAI,QAAQ,CACjC,CCxCA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EACtDZ,EAAW,SAAS,cAAc,gBAAgB,EACxD,IAAIL,EAAO,EACPD,EAAQ,GAEZkB,EAAK,iBAAiB,SAAU,MAAME,GAAK,CAMzC,GALAA,EAAE,eAAc,EAEhBpB,EAAQmB,EAAM,MAAM,OACpBlB,EAAO,EAEH,CAACD,EAAO,CACVqB,EAAS,QAAQ,CACf,QAAS,+BACT,SAAU,WACV,gBAAiB,UACjB,aAAc,MACpB,CAAK,EACD,MACD,CAEDR,IACAI,IACAH,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAMvB,EAAiBC,CAAK,EACzC,GAAIsB,EAAK,KAAK,SAAW,EACvB,OAAOD,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,aAAc,MACtB,CAAO,EAGHb,EAAcc,EAAK,IAAI,EAEnBA,EAAK,UAAY,GACnBN,IAEAC,GAEH,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRR,GACD,CACH,CAAC,EAEDT,EAAS,iBAAiB,QAAS,SAAY,CAC7CW,IACAH,IAEAb,GAAQ,EAER,GAAI,CACF,MAAMqB,EAAO,MAAMvB,EAAiBC,EAAOC,CAAI,EACzCuB,EAAa,KAAK,KAAKF,EAAK,UAAY,EAAE,EAIhD,GAFAd,EAAcc,EAAK,IAAI,EAEnBrB,EAAOuB,EACTR,QAEA,QAAAC,IACOI,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACjB,CAAO,CAEJ,OAAQlB,EAAK,CACZ,QAAQ,IAAIA,CAAG,CACnB,QAAY,CACRY,GACD,CACH,CAAC"}